pipeline {
    
    stages{
        node("slave0"){
        stage("Build") {
             steps {
                echo "build"
                }
        }
        stage("Deploy") {
            steps {
                script {
                
                   try{
                       
                        //kubernetesDeploy configs: 'ttt.yml', kubeConfig: [path: ''], kubeconfigId: 'k8s-test', secretName: '', ssh: [sshCredentialsId: '*', sshServer: ''], textCredentials: [certificateAuthorityData: '', clientCertificateData: '', clientKeyData: '', serverUrl: 'https://']
                        kubectl apply -f pod.yml
                        echo "try"
                   }catch(error){
                       echo "catch"
                        //kubectl create -f
                   }
                }
            }
        }
        stage("Test") {
             steps {
            //kubectl get pods
            echo "test"
            //curl...
             }
            }
        }
    }
    
}